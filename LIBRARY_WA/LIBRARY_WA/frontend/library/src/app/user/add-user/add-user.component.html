<h2>Dodaj użytkownika</h2>
<form [formGroup]="addUserForm" >

  <div class="form-group">
    <label for="login: ">Login</label>
    <input type="text" formControlName="login" class="form-control" [(ngModel)]="user.login" ng-change="checkLoginExistsInDB()" />
    <div class="alert alert-danger " *ngIf="(sumbitted && (addUserForm.get('login').hasError('required') || addUserForm.get('login').hasError('pattern')))
              ||(addUserForm.get('login').hasError('required') && addUserForm.get('login').dirty && addUserForm.get('login').touched) || (addUserForm.get('login').hasError('required') && addUserForm.get('login').touched)">Pole login nie może byc puste</div>
   
    <div class="alert alert-danger " *ngIf="addUserForm.get('login').hasError('loginTaken') && addUserForm.get('login').touched">Login jest już zajęty</div>


    <!--   <div class="alert alert-danger " *ngIf="addUserForm.get('login').hasError('minLength') && addUserForm.get('login').touched && addUserForm.get('login').dirty">Login musi posiadać minimum 5 znaków</div>
  <div class="alert alert-danger " *ngIf="addUserForm.get('login').hasError('maxLength') && addUserForm.get('login').touched && addUserForm.get('login').dirty">Za długi login</div>
    <div class="alert alert-danger " *ngIf="addUserForm.get('login').hasError('pattern') && addUserForm.get('login').touched && addUserForm.get('login').dirty">Pole login nie może zawierać spacji</div>-->

  </div>

  <div class="form-group">
    <label for="email">E-mail</label>
    <input type="email" formControlName="email" class="form-control" [(ngModel)]="user.email" ng-change="checkEmailExistsInDB()"/>
    <div class="alert alert-danger " *ngIf="(sumbitted && addUserForm.get('email').hasError('required'))||(addUserForm.get('email').hasError('required')  && addUserForm.get('email').touched)">Pole email nie może być puste</div>
    <div class="alert alert-danger " *ngIf="!sumbitted && addUserForm.get('email').hasError('email') && addUserForm.get('email').dirty && addUserForm.get('email').touched">Nieprawidłowy format email</div>
    <div class="alert alert-danger " *ngIf="addUserForm.get('email').hasError('emailTaken') && addUserForm.get('email').touched">Podany email już jest przypisany do użytkownika</div>
  </div>

    <div class="form-group">
      <label for="fullname">Imię i nazwisko</label>
      <input type="text" formControlName="fullname" class="form-control" [(ngModel)]="user.fullname" />
      <div class="alert alert-danger " *ngIf="(sumbitted && (addUserForm.get('fullname').hasError('required') || addUserForm.get('fullname').hasError('pattern'))) || (addUserForm.get('fullname').hasError('required') && addUserForm.get('fullname').dirty)">Pole imię i nazwisko nie może byc puste</div>
    </div>

    <div class="form-group">
      <label for="date_Of_Birth">Data urodzenia</label>
      <input type="date" formControlName="date_Of_Birth" class="form-control" [(ngModel)]="user.date_of_birth" max="{{maxDate | date:'yyyy-MM-dd'}}" />
      <div class="alert alert-danger " *ngIf="sumbitted && addUserForm.get('date_Of_Birth').hasError('required') ">Pole data urodzenia nie może byc puste</div>
    </div>

    <div class="form-group">
      <label for="phone_Number">Numer telefonu</label>
      <input type="tel" formControlName="phone_Number" class="form-control" [(ngModel)]="user.phone_number" placeholder="format. 000-000-000" />
      <div class="alert alert-danger " *ngIf="(sumbitted && addUserForm.get('phone_Number').hasError('required')) || (addUserForm.get('phone_Number').hasError('required') && addUserForm.get('phone_Number').dirty)">Pole telefon musi być wypełnione</div>
      <div class="alert alert-danger " *ngIf="!sumbitted && addUserForm.get('phone_Number').hasError('pattern') && addUserForm.get('phone_Number').dirty && addUserForm.get('phone_Number').touched">Nieprawidłowy format numeru telefonu</div>
    </div>

    <div class="form-group">
      <label for="address">Adres</label>
      <input type="text" formControlName="address" class="form-control" [(ngModel)]="user.address" />
      <div class="alert alert-danger " *ngIf="(sumbitted && (addUserForm.get('address').hasError('required') || addUserForm.get('address').hasError('required'))) || (addUserForm.get('address').hasError('required') && addUserForm.get('address').dirty)">Pole email lub telefon muszą być wypełnione</div>
    </div>

    <div class="form-group">
      <label for="type">Typ użytkownika:</label><br />
      <input type="radio" formControlName="type" [(ngModel)]="user.user_type" value="r">Czytelnik
      <input type="radio" formControlName="type" [(ngModel)]="user.user_type" value="l">Bibliotekarz
      <div class="alert alert-danger " *ngIf="sumbitted && addUserForm.get('user_type').hasError('required')">Typ użytkownika nie może byc pusty</div>
    </div>

    <div class="radio-group">
      <label for="password">Hasło</label>
      <input type="text" formControlName="type" class="form-control" disabled="disabled" [(ngModel)]="user.password" />
    </div>

    <div class="form-group">
      <button type="submit" (ngSubmit)="addUser()" [disabled]="loading || !addUserForm.valid" class="btn btn-primary">Dodaj użytkownika</button>
     <!--   <button [disabled]="loading " class="btn btn-primary" ngclick="clearForm()">Wyczyść</button>
        <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
    -->
    </div>
</form>
<div class="form-group">
  <button [disabled]="loading " class="btn btn-primary" ngclick="clearForm()">Wyczyść</button>
  <!--  <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
  -->
</div>
